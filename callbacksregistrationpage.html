<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    </meta>
    <title>Tej</title>
</head>

<body>
    <script>
        const posts = [
            { title: ' Post One ', body: ' This is post one ', createdAt: new Date().getTime() },
            { title: ' Post Two ', body: ' This is post two ', createdAt: new Date().getTime() }
        ];
        let intervalID = 0;

        function getPosts() {
            clearInterval(intervalID);
            intervalID = setInterval(() => {
                let output = '';
                for (let i = 0; i < posts.length; i++) {
                    output += `<li> ${posts[i].title} - last updated ${Math.trunc((new Date().getTime() - posts[i].createdAt) / 1000)}</li>`
                }
                console.log("timer running ID=", intervalID);
                document.body.innerHTML = output;
            }, 1000);
        }

        function createPost(post, callback) {
            setTimeout(() => {
                posts.push({ ...post, createdAt: new Date().getTime() });
                callback();
            }, 2000);
        }

        function create4thPost(post, callback) {
            setTimeout(() => {
                posts.push({ ...post, createdAt: new Date().getTime() });
                callback();
            }, 2000);
        }

        createPost({ title: 'Post Three', body: 'This is post three' }, getPosts);
        create4thPost({ title: 'Post Four', body: 'This is post four' }, getPosts);

        var timer;
        var count = 0;
        function lastEditedInSecondsAgo() {
            count = 0;
            clearInterval(timer)
            timer = setInterval(() => {
                count++;
                console.log(count);
            }, 5000);
        }
    </script>

</body>

</html>